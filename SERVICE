#!/usr/bin/env rc

flag e +

fn StartWorker {
		# goofy stuff to ensure we properly fork off & detach
		# not sure why rc(1) is ass about it
	@ {
		./SERVE_LOCALHOST >/dev/null >[2]/dev/null &
	}
}

cd `{dirname $0}

if (! test -e .servicepid)
	StartWorker

if (! test -d /proc/ ^ `{cat .servicepid})
	StartWorker
